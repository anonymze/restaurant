---
import { Image } from "astro:assets";
import Layout from "@/layouts/layout.astro";
import HomeImg from "@/assets/images/home.webp";
import { getImage } from "astro:assets";
import { cn } from "@/utils/libs/tailwind";
import AnimatedText from "@/components/animated-text";
import LogoComplete from "@/assets/images/logo_complete.webp";
import FlagFR from "@/assets/icons/flag-fr.svg";

const optimizedHomeImage = await getImage({
	src: HomeImg,
	format: "webp",
	widths: [360, 720, 980, 1200, 1600, 1920, 2560],
	loading: "eager",
});
---

<Layout overflow={false} header={false} footer={false}>
	<Fragment slot="head-preload">
		<link
			rel="preload"
			href={optimizedHomeImage.src}
			as="image"
			imagesrcset={optimizedHomeImage.srcSet.attribute}
			imagesizes={`(max-width: 360px) 360px, (max-width: 720px) 720px, (max-width: 980px) 980px, (max-width: 1600px) 1600px, (max-width: 1920px) 1920px, (max-width: 2560px) 2560px`}
		/>
	</Fragment>

	<main class="w-full h-full">
		<h1 class="sr-only">Mauvaise herbe restaurant</h1>

		<section aria-labelledby="hero-heading" class="relative flex-1 h-1/2 lg:h-full">
			<Image
				src={optimizedHomeImage.src}
				width={980}
				height={1200}
				sizes={`(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 980px) 720px, (max-width: 1600px) 980px, ${optimizedHomeImage.width}px`}
				alt="Restaurant ambiance photograph"
				class="w-full h-full object-cover opacity-0 transition-opacity duration-300"
				fetchpriority="high"
				onload="this.classList.remove('opacity-0')"
			/>

			<nav class="absolute right-0 w-full top-8 z-10" aria-label="Navigation première partie">
				<ul
					class="flex gap-6 items-center justify-end lg:gap-14 h-14 pr-8 text-white text-2xl font-bold text-shadow"
				>
					<li class="mr-auto">
						<Image src={LogoComplete} alt="Mauvaise herbe restaurant logo" class="w-48 ml-3 drop-shadow" />
					</li>
					<li>
						<AnimatedText href="/en/concept" title="Lien vers la page concept" client:load delay={0.2}
							>Concept</AnimatedText
						>
					</li>
					<li>
						<AnimatedText href="/en/cuisine" title="Lien vers la page cuisine" client:load delay={0.3}
							>Cuisine</AnimatedText
						>
					</li>
					<li>
						<AnimatedText href="/en/caviste" title="Lien vers la page caviste" client:load delay={0.4}
							>Caviste</AnimatedText
						>
					</li>
					<li>
						<AnimatedText href="/en/agenda" title="Lien vers la page agenda" client:load delay={0.5}
							>Concept</AnimatedText
						>
					</li>
					<li>
						<AnimatedText href="/en/equipe" title="Lien vers la page équipe" client:load delay={0.6}
							>Cuisine</AnimatedText
						>
					</li>
					<li>
						<AnimatedText href="/en/contact" title="Lien vers la page contact" client:load delay={0.7}
							>Caviste</AnimatedText
						>
					</li>
					<li>
						<AnimatedText href="/" title="Change de langue" className="align-middle" client:load delay={0.8}>
							<FlagFR class="w-12 h-12 hover:scale-110 transition-all duration-200" />
						</AnimatedText>
					</li>
				</ul>
			</nav>

			<div class="absolute top-1/2 -translate-y-1/2 left-0 z-10 m-auto text-center w-full h-fit">
				<h2
					id="hero-heading"
					class="px-2 py-1 text-[2rem] text-white text-shadow backdrop-blur-xs w-fit mx-auto uppercase font-serif whitespace-nowrap"
				>
					Restaurant – Bar – Caviste
				</h2>
				<div class="text-white w-fit mx-auto max-w-3xl mt-5">
					<p class="p-2 text-shadow backdrop-blur-xs font-serif">
						Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis est perferendis, expedita
						obcaecati quasi adipisci qui fuga nostrum nobis veniam omnis officia cupiditate fugit optio
						repellat veritatis deleniti ut earum? Lorem ipsum dolor sit amet consectetur adipisicing elit.
						Corporis est perferendis, expedita obcaecati quasi adipisci qui fuga nostrum nobis veniam omnis
						officia cupiditate fugit optio repellat veritatis deleniti ut earum?
					</p>
				</div>
			</div>

			<div
				class={cn(
					"absolute inset-0",
					"bg-gradient-to-t from-white/10 to-transparent",
					"after:block after:w-full after:h-full after:bg-gradient-to-t after:from-white/50 after:to-transparent after:opacity-0 after:transition-opacity after:duration-600"
				)}
			>
			</div>
		</section>
	</main>
</Layout>
