---
import Layout from "@/layouts/layout.astro";
import { sanityClient } from "sanity:client";
import type { SanityDocument } from "@sanity/client";
import type { Team } from "@/types/team";
import { Card, CardContent } from "@/components/ui/card";
import { Image } from "astro:assets";

const TEAM_QUERY = `*[_type == "team"]{
	firstname,
	lastname,
	role,
	description,
	"image": image.asset->url
}`;
const team = await sanityClient.fetch<SanityDocument<Team[]>>(TEAM_QUERY);
---

<Layout overflow>
	<main class="bg-stone-50 py-16 px-4 md:py-24">
		<section class="container mx-auto max-w-6xl space-y-12">
			<div class="mb-12 max-w-2xl mx-auto">
				<div class="flex justify-start items-center gap-3 mb-6">
					<div class="h-0.5 w-8 bg-primary" aria-hidden="true"></div>
					<h1 class="text-xl text-primary font-normal">Notre équipe</h1>
				</div>
				<h2 class="text-3xl font-serif text-stone-800 leading-tight">Une équipe soudée et passionnée</h2>
				<p class="text-lg text-left text-stone-600 leading-relaxed my-6">
					Lorem ipsum dolor sit amet consectetur adipisicing elit. Magni laborum illum nesciunt aspernatur libero, consequatur placeat quam veniam? Beatae tempora, alias doloremque quasi voluptatum fugiat ab tempore non ex maxime.
				</p>
			</div>
		</section>

		<article class="bg-stone-50 px-4">
			<div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
				{
					team.map((member) => (
						<Card className="bg-stone-50 border-none overflow-hidden rounded-none">
							<div class="aspect-[4/3] overflow-hidden">
								<Image
									width={400}
									height={300}
									src={member.image}
									alt={member.lastname + " " + member.firstname}
									class="w-full h-full object-cover object-top transition-transform duration-300 hover:scale-105"
								/>
							</div>
							<CardContent className="p-6 text-center">
								<h3 class="text-xl font-serif text-stone-800 mb-1">
									{member.lastname + " " + member.firstname}
								</h3>
								<p class="text-sm font-medium text-primary">{member.role}</p>
								<p class="text-sm text-stone-600">{member.description}</p>
							</CardContent>
						</Card>
					))
				}
			</div>
		</article>
	</main>
</Layout>
