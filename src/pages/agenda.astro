---
import Layout from "@/layouts/layout.astro";
import { sanityClient } from "sanity:client";
import type { SanityDocument } from "@sanity/client";
import type { Event } from "@/types/event";
import { Image } from "astro:assets";

const EVENT_QUERY = `*[_type == "agenda"]{
	"image": image.asset->url
}`;
const events = await sanityClient.fetch<SanityDocument<Event[]>>(EVENT_QUERY);
---

<Layout overflow>
	<main class="bg-stone-50 py-16 px-4 md:py-24">
		<section class="container mx-auto max-w-6xl space-y-12">
			<div class="mb-12 max-w-2xl mx-auto">
				<div class="flex justify-start items-center gap-3 mb-6">
					<div class="h-0.5 w-8 bg-primary" aria-hidden="true"></div>
					<h1 class="text-xl text-primary font-normal">Nos évènements</h1>
				</div>
				<h2 class="text-3xl font-serif text-stone-800 leading-tight">Qu'est-ce qui se passe ?</h2>
				<p class="text-lg text-left text-stone-600  leading-relaxed my-6">
					Notre sommelier a rempli notre cave à vin avec plus de 100 références, venant du gaillacois, des
					quatre coins de la France mais aussi avec une sélection de vins étrangers. Tous nos vins sont
					certifiés bios, biodynamiques ou naturels. Nous privilégions évidement les domaines à taille
					humaine, avec plusieurs petites exploitations, et aussi avec une philosophie tournée autour du
					respect de son terroir et de son environnement.

					<br />
					<br />
					La gamme quant à elle est sans cesse renouvelée afin de vous proposer toujours de nouvelles découvertes.
					Vous trouverez ci-dessous notre dernière liste de boissons. <span class="font-bold"
						>Tous nos vins, ainsi que boissons sans alcool et spiritueux sont disponibles à l'achat caviste,
						avec une remise de 20% par rapport au prix sur table</span
					>. <br /><br />
					<span class="font-extrabold">Alors tchin !</span>
				</p>
			</div>
		</section>

		<article class="container mx-auto max-w-6xl space-y-4">
			{events.map((event) => (
				<div class="flex flex-col items-center justify-center">
					<Image
						width={1000}
						height={1200}
						src={event.image}
						alt={"Photo de l'évènement"}
					/>
				</div>
			))}
		</article>
	</main>
</Layout>
