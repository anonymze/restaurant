---
import { Image } from "astro:assets";
import Layout from "@/layouts/layout.astro";
import EspaceImg from "@/assets/images/espace.webp";
// import Cave2Img from "@/assets/images/plat.webp";
import { getImage } from "astro:assets";
import { cn } from "@/utils/libs/tailwind";
import AnimatedText from "@/components/animated-text";
import LogoComplete from "@/assets/images/logo_complete.webp";
import FlagEN from "@/assets/icons/flag-en.svg";

const optimizedPlanteImage = await getImage({
	src: EspaceImg,
	format: "webp",
	widths: [240, 540, 720, 980, EspaceImg.width],
	loading: "eager",
});
---

<Layout overflow={false} header={false} footer={false}>
	<Fragment slot="head-preload">
		<link
			rel="preload"
			href={optimizedPlanteImage.src}
			as="image"
			imagesrcset={optimizedPlanteImage.srcSet.attribute}
			imagesizes={`(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 980px) 720px, (max-width: 1600px) 980px, ${EspaceImg.width}px`}
		/>
	</Fragment>

	<main class="relative flex flex-col w-full h-full lg:flex-row">
		<h1 class="sr-only">Mauvaise herbe restaurant</h1>

		<a class="absolute top-6 right-6 z-10" href="/">
			<FlagEN class="w-12 h-12 hover:scale-110 transition-all duration-200" />
		</a>

		<div class="relative flex-1 h-1/2 lg:h-full">
			<div
				class=" absolute right-0 w-full top-8 z-10 text-primary font-bold text-shadow text-2xl"
			>
				<nav aria-label="Navigation principale">
					<ul class="flex gap-6 items-center justify-end lg:gap-14 h-14 pr-8">
						<AnimatedText href="/concept" title="Concept" client:load delay={0.2} className="text-center lg:text-right mr-auto"
							><Image src={LogoComplete} alt="Logo du restaurant" class="w-36 ml-3 drop-shadow" /></AnimatedText
						>
						<AnimatedText href="/concept" title="Concept" client:load delay={0.4} className="text-center lg:text-right"
							>Concept</AnimatedText
						>
						<AnimatedText href="/cuisine" title="Cuisine" client:load delay={0.6} className="text-center lg:text-right"
							>Cuisine</AnimatedText
						>
						<AnimatedText href="/caviste" title="Caviste" client:load delay={0.8} className="text-center lg:text-right"
							>Caviste</AnimatedText
						>
					</ul>
				</nav>
			</div>

			<Image
				src={optimizedPlanteImage.src}
				width={980}
				height={1200}
				sizes={`(max-width: 360px) 240px, (max-width: 720px) 540px, (max-width: 980px) 720px, (max-width: 1600px) 980px, ${EspaceImg.width}px`}
				alt="Un plat du restaurant"
				class="w-full h-full object-cover opacity-0 transition-opacity duration-300"
				fetchpriority="high"
				onload="this.classList.remove('opacity-0')"
			/>

			<div class="absolute top-1/2 -translate-y-1/2 left-0 z-10 m-auto text-center w-full h-fit">
				<h2
					class="p-2 text-[2rem] text-white text-shadow backdrop-blur-xs w-fit mx-auto uppercase font-serif whitespace-nowrap"
				>
					Restaurant – Bar – Caviste
				</h2>
				<div class="text-white w-fit mx-auto max-w-3xl mt-5">
					<p class="p-2 text-shadow backdrop-blur-xs font-serif">
						Lorem ipsum dolor sit amet consectetur adipisicing elit. Corporis est perferendis, expedita
						obcaecati quasi adipisci qui fuga nostrum nobis veniam omnis officia cupiditate fugit optio
						repellat veritatis deleniti ut earum? Lorem ipsum dolor sit amet consectetur adipisicing elit.
						Corporis est perferendis, expedita obcaecati quasi adipisci qui fuga nostrum nobis veniam omnis
						officia cupiditate fugit optio repellat veritatis deleniti ut earum?
					</p>
				</div>
			</div>

			<div
				class={cn(
					"absolute inset-0",
					"bg-gradient-to-t from-white/10 to-transparent",
					"after:block after:w-full after:h-full after:bg-gradient-to-t after:from-white/50 after:to-transparent after:opacity-0 after:transition-opacity after:duration-600"
				)}
			>
			</div>
		</div>

		<div class="relative flex-1 h-1/2 lg:h-full">
			<div
				class="absolute bottom-0 -translate-x-1/2 left-1/2 z-10 h-fit text-green-700 font-bold drop-shadow text-2xl lg:top-8 lg:left-8 lg:translate-x-0"
			>
				<nav aria-label="Navigation principale">
					<ul class="flex gap-6 lg:gap-14 h-14 items-center">
						<AnimatedText href="/agenda" title="Agenda" client:load delay={0.2} className="text-center lg:text-right"
							>Agenda</AnimatedText
						>
						<AnimatedText href="/equipe" title="Equipe" client:load delay={0.4} className="text-center lg:text-right"
							>Equipe</AnimatedText
						>
						<AnimatedText href="/contact" title="Contact" client:load delay={0.6} className="text-center lg:text-right"
							>Contact</AnimatedText
						>
					</ul>
				</nav>
			</div>

			<div class="absolute top-1/2 -translate-y-1/2 left-0 z-10 m-auto text-center w-full h-fit space-y-6">
				<h2 class="text-3xl text-primary drop-shadow w-fit mx-auto uppercase font-serif whitespace-nowrap">
					Actualités du moment
				</h2>
				<p class="text-stone-500">Mauvaise herbe vous propose différentes activités au sein du restaurant</p>
				<div class="border-primary border-2 rounded-md h-fit max-w-3xl mx-4">
					<p class="text-lg font-bold text-center p-3 text-stone-500">
						Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci error voluptates ut. Odio autem
						eum dicta? Cum minima qui vitae, reprehenderit laborum ab, doloremque quaerat sequi illum voluptas
						voluptatem quos. voluptatem quos.
					</p>
				</div>
			</div>
		</div>
	</main>
</Layout>
