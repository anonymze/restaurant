---
import { Image } from "astro:assets";
import Layout from "@/layouts/layout.astro";
import HomeImg from "@/assets/images/home.webp";
import { getImage } from "astro:assets";
import { cn } from "@/utils/libs/tailwind";
import AnimatedText from "@/components/animated-text";
import LogoComplete from "@/assets/images/logo_complete.webp";
import FlagEN from "@/assets/icons/flag-en.svg";

const optimizedHomeImage = await getImage({
	src: HomeImg,
	format: "webp",
	widths: [360, 720, 980, 1200, 1600, 1920, 2560],
	loading: "eager",
});
---

<Layout overflow={false} header={false} footer={false}>
	<Fragment slot="head-preload">
		<link
			rel="preload"
			href={optimizedHomeImage.src}
			as="image"
			imagesrcset={optimizedHomeImage.srcSet.attribute}
			imagesizes={`(max-width: 360px) 360px, (max-width: 720px) 720px, (max-width: 980px) 980px, (max-width: 1600px) 1600px, (max-width: 1920px) 1920px, (max-width: 2560px) 2560px`}
		/>
	</Fragment>

	<main class="relative flex flex-col w-full h-full lg:flex-row">
		<h1 class="sr-only">Mauvaise herbe restaurant</h1>

		<a class="absolute top-4 right-6 z-10" href="/en">
			<FlagEN class="w-12 h-12 hover:scale-110 transition-all duration-200" />
		</a>

		<div class="relative flex-1 h-1/2 lg:h-full">
			<div
				class="absolute bottom-0 -translate-x-1/2 left-1/2 z-10 h-fit text-3xl text-primary uppercase font-bold text-shadow lg:top-24 lg:right-3 lg:left-auto lg:translate-x-0 lg:text-7xl"
			>
				<nav aria-label="Navigation principale">
					<ul class="flex flex-col gap-6 lg:gap-4">
						<AnimatedText href="/concept" title="Concept" client:load delay={0.2} className="text-center lg:text-right"
							>Concept</AnimatedText
						>
						<AnimatedText href="/cuisine" title="Cuisine" client:load delay={0.4} className="text-center lg:text-right"
							>Cuisine</AnimatedText
						>
						<AnimatedText href="/caviste" title="Caviste" client:load delay={0.6} className="text-center lg:text-right"
								>Caviste</AnimatedText
						>
						<AnimatedText href="/agenda" title="Agenda" client:load delay={0.8} className="text-center lg:text-right"
							>Agenda</AnimatedText
						>
						<AnimatedText href="/equipe" title="Equipe" client:load delay={1} className="text-center lg:text-right"
							>Equipe</AnimatedText
						>
						<AnimatedText href="/contact" title="Contact" client:load delay={1.2} className="text-center lg:text-right"
							>Contact</AnimatedText
						>
					</ul>
				</nav>
			</div>

			<Image
				src={optimizedHomeImage.src}
				width={1920}
				height={1200}
				sizes={`(max-width: 360px) 360px, (max-width: 720px) 720px, (max-width: 980px) 980px, (max-width: 1600px) 1600px, (max-width: 1920px) 1920px, (max-width: 2560px) 2560px`}
				alt="Une table du restaurant"
				class="w-full h-full object-cover opacity-0 transition-opacity duration-300"
				fetchpriority="high"
				onload="this.classList.remove('opacity-0')"
			/>

			<div class="absolute inset-0 z-10 m-auto text-center w-fit h-fit"></div>

			<div
				class={cn(
					"absolute inset-0",
					"bg-gradient-to-t from-white/10 to-transparent",
					"after:block after:w-full after:h-full after:bg-gradient-to-t after:from-white/50 after:to-transparent after:opacity-0 after:transition-opacity after:duration-600"
				)}
			>
			</div>
		</div>

		<div class="relative flex-1 h-1/2 lg:h-full">
			<div
				class="absolute top-0 left-1/2 -translate-x-1/2 z-10 flex flex-col w-full text-dark font-bold uppercase lg:top-1/2 lg:left-1/2 lg:-translate-x-1/2 lg:-translate-y-1/2"
			>
				<AnimatedText href="/" title="Logo du restaurant" client:load delay={0.2} className="w-full">
					<Image src={LogoComplete} alt="Logo du restaurant" class="w-60 mx-auto" />
				</AnimatedText>

				<div class="p-4 space-y-6">
					<h2 class="text-green-700 text-3xl text-center mt-5">Restaurant – Bar – Caviste</h2>
					<p>
						Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci error voluptates ut. Odio autem
						eum dicta? Cum minima qui vitae, reprehenderit laborum ab, doloremque quaerat sequi illum voluptas
						voluptatem quos. Lorem ipsum dolor sit amet consectetur adipisicing elit. Adipisci error
						voluptates ut. Odio autem eum dicta? Cum minima qui vitae, reprehenderit laborum ab, doloremque
						quaerat sequi illum voluptas voluptatem quos.
					</p>

					<div class="border-2 rounded-md h-40">
						<h3 class="text-center text-2xl font-bold ">Actualités du moment</h3>
						<Image src={LogoComplete} alt="Logo du restaurant" class="w-60 mx-auto" />
					</div>
				</div>
			</div>

			<div class="absolute inset-0 z-10 m-auto text-center w-fit h-fit"></div>

			<div
				class={cn(
					"absolute inset-0",
					"bg-gradient-to-t from-white/10 to-transparent",
					"after:block after:w-full after:h-full after:bg-gradient-to-t after:from-white/50 after:to-transparent after:opacity-0 after:transition-opacity after:duration-600"
				)}
			>
			</div>
		</div>
	</main>
</Layout>
